var Zt=Object.defineProperty,Rt=Object.defineProperties;var zt=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var Wt=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable;var M=(c,e,m)=>e in c?Zt(c,e,{enumerable:!0,configurable:!0,writable:!0,value:m}):c[e]=m,u=(c,e)=>{for(var m in e||(e={}))Wt.call(e,m)&&M(c,m,e[m]);if($)for(var m of $(e))Ft.call(e,m)&&M(c,m,e[m]);return c},f=(c,e)=>Rt(c,zt(e));(function(c,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(c=typeof globalThis!="undefined"?globalThis:c||self,e(c.Buche={},c.Vue))})(this,function(c,e){"use strict";var m,S=new Uint8Array(16);function D(){if(!m&&(m=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!m))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(S)}var T=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function U(n){return typeof n=="string"&&T.test(n)}for(var a=[],y=0;y<256;++y)a.push((y+256).toString(16).substr(1));function Z(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=(a[n[t+0]]+a[n[t+1]]+a[n[t+2]]+a[n[t+3]]+"-"+a[n[t+4]]+a[n[t+5]]+"-"+a[n[t+6]]+a[n[t+7]]+"-"+a[n[t+8]]+a[n[t+9]]+"-"+a[n[t+10]]+a[n[t+11]]+a[n[t+12]]+a[n[t+13]]+a[n[t+14]]+a[n[t+15]]).toLowerCase();if(!U(o))throw TypeError("Stringified UUID is invalid");return o}function V(n,t,o){n=n||{};var d=n.random||(n.rng||D)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,t){o=o||0;for(var s=0;s<16;++s)t[o+s]=d[s];return t}return Z(d)}const B=(n,t)=>n.uuid===t?n:(n.children||[]).reduce((o,d)=>o||B(d,t),null),k=n=>f(u({},n),{uuid:V(),children:(n.children||[]).map(t=>k(t))}),C=(n,t,o)=>n.uuid===o?f(u({},n),{children:[...n.children||[],t]}):f(u({},n),{children:(n.children||[]).map(d=>C(d,t,o))}),w=(n,t)=>f(u({},n),{children:n.children.filter(o=>o.uuid!==t).map(o=>w(o,t))}),R=(n,t,o)=>{const d=C(n,k(t),o);return w(d,t.uuid)},N=n=>{const t=u({},n);return typeof t.cssClasses=="undefined"&&(t.cssClasses=""),t.children=t.children.map(N),t};var _=(n,t)=>{for(const[o,d]of t)n[o]=d;return n};const z={name:"BucheBranch",computed:{tNodes(){return this.nodes}},props:{lang:{type:String,default:"en"},nodes:{type:Array,default:()=>[]},show_labels:{type:Boolean,default:!1},active_node:{},copy_candidate:{},teleport_candidate:{},path:{type:Array,default:()=>[]},depth:{},blocks:{},can_destroy:{}},beforeCreate:function(){this.$options.components={BucheNode:L}},methods:{handle_before(n){const t=this.nodes.findIndex(s=>s.uuid===n);if(t===0||!t)return;const o=[...this.nodes],d=o.splice(t,1)[0];o.splice(t-1,0,d),this.$emit("update:nodes",o)},handle_after(n){const t=this.nodes.findIndex(s=>s.uuid===n);if(t===this.nodes.length-1||!t&&t!==0)return;const o=[...this.nodes],d=o.splice(t,1)[0];o.splice(t+1,0,d),this.$emit("update:nodes",o)},handle_destroy(n){this.$emit("update:nodes",[...this.nodes].filter(t=>t.uuid!==n))},updateBranch(n,t){this.$emit("update:nodes",this.nodes.map(o=>o.uuid===n?t:o))}}},W={class:"BucheBranch"};function F(n,t,o,d,s,l){const p=e.resolveComponent("buche-node");return e.openBlock(),e.createElementBlock("div",W,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.tNodes,(r,g)=>(e.openBlock(),e.createBlock(p,{node:r,depth:o.depth,lang:o.lang,index:g,active_node:o.active_node,onActive_node:t[0]||(t[0]=h=>n.$emit("active_node",h)),total:o.nodes.length,copy_candidate:o.copy_candidate,teleport_candidate:o.teleport_candidate,path:[...o.path,r.type],blocks:o.blocks,show_labels:o.show_labels,can_destroy:o.can_destroy,onBefore:h=>l.handle_before(r.uuid),onAfter:h=>l.handle_after(r.uuid),onWant_teleport:t[1]||(t[1]=h=>n.$emit("want_teleport",h)),onDestroy:h=>l.handle_destroy(r.uuid),onWant_copy:t[2]||(t[2]=h=>n.$emit("want_copy",h)),onTeleport:t[3]||(t[3]=h=>n.$emit("teleport",h)),onBucheCopy:t[4]||(t[4]=h=>n.$emit("bucheCopy",h)),"onUpdate:node":h=>l.updateBranch(r.uuid,h),key:r.uuid},null,8,["node","depth","lang","index","active_node","total","copy_candidate","teleport_candidate","path","blocks","show_labels","can_destroy","onBefore","onAfter","onDestroy","onUpdate:node"]))),128))])}var j=_(z,[["render",F]]);const P={props:{folded:{}}},I={key:0,class:"icon is-small"},O=[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"})],-1)],q={key:1,class:"icon is-small"},G=[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"})],-1)];function X(n,t,o,d,s,l){return e.openBlock(),e.createElementBlock("button",{class:"button is-rounded is-small is-xsmall",onClick:t[0]||(t[0]=p=>n.$emit("update:folded",!o.folded))},[o.folded?(e.openBlock(),e.createElementBlock("span",I,O)):(e.openBlock(),e.createElementBlock("span",q,G))])}var J=_(P,[["render",X]]);const K={name:"BucheCopyButton"},Q={class:"BucheNode_action_reorder_copy button is-small is-xsmall is-rounded"},Y=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"})])],-1)];function v(n,t,o,d,s,l){return e.openBlock(),e.createElementBlock("button",Q,Y)}var ee=_(K,[["render",v]]);const te={name:"BucheTeleportButton"},oe={class:"BucheNode_action_reorder_teleport button is-small is-xsmall is-rounded"},ne=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M13.13 22.19L11.5 18.36C13.07 17.78 14.54 17 15.9 16.09L13.13 22.19M5.64 12.5L1.81 10.87L7.91 8.1C7 9.46 6.22 10.93 5.64 12.5M19.22 4C19.5 4 19.75 4 19.96 4.05C20.13 5.44 19.94 8.3 16.66 11.58C14.96 13.29 12.93 14.6 10.65 15.47L8.5 13.37C9.42 11.06 10.73 9.03 12.42 7.34C15.18 4.58 17.64 4 19.22 4M19.22 2C17.24 2 14.24 2.69 11 5.93C8.81 8.12 7.5 10.53 6.65 12.64C6.37 13.39 6.56 14.21 7.11 14.77L9.24 16.89C9.62 17.27 10.13 17.5 10.66 17.5C10.89 17.5 11.13 17.44 11.36 17.35C13.5 16.53 15.88 15.19 18.07 13C23.73 7.34 21.61 2.39 21.61 2.39S20.7 2 19.22 2M14.54 9.46C13.76 8.68 13.76 7.41 14.54 6.63S16.59 5.85 17.37 6.63C18.14 7.41 18.15 8.68 17.37 9.46C16.59 10.24 15.32 10.24 14.54 9.46M8.88 16.53L7.47 15.12L8.88 16.53M6.24 22L9.88 18.36C9.54 18.27 9.21 18.12 8.91 17.91L4.83 22H6.24M2 22H3.41L8.18 17.24L6.76 15.83L2 20.59V22M2 19.17L6.09 15.09C5.88 14.79 5.73 14.47 5.64 14.12L2 17.76V19.17Z"})])],-1)];function se(n,t,o,d,s,l){return e.openBlock(),e.createElementBlock("button",oe,ne)}var le=_(te,[["render",se]]);const de={name:"BucheDestroyButton"},ie={class:"BucheNode_action_reorder_destroy button is-small is-xsmall is-rounded"},ce=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z"})])],-1)];function re(n,t,o,d,s,l){return e.openBlock(),e.createElementBlock("button",ie,ce)}var ae=_(de,[["render",re]]);const _e={name:"BucheCloseActionsButton"},he={class:"BucheNode_action_hide_actions button is-small is-xsmall is-rounded"},me=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})])],-1)];function ue(n,t,o,d,s,l){return e.openBlock(),e.createElementBlock("button",he,me)}var pe=_(_e,[["render",ue]]);const fe={},be={class:"BucheNode_action_reorder_prev button is-small is-xsmall is-rounded"},ye=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z"})])],-1)];function Be(n,t,o,d,s,l){return e.openBlock(),e.createElementBlock("button",be,ye)}var ke=_(fe,[["render",Be]]);const Ce={},ge={class:"BucheNode_action_reorder_next button is-small is-xsmall is-rounded"},Ve=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z"})])],-1)];function we(n,t,o,d,s,l){return e.openBlock(),e.createElementBlock("button",ge,Ve)}var Ne=_(Ce,[["render",we]]);const Le={},xe={class:"BucheNode_action_hide_actions button is-small is-xsmall is-rounded"},Ee=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z"})])],-1)];function He(n,t,o,d,s,l){return e.openBlock(),e.createElementBlock("button",xe,Ee)}var Ae=_(Le,[["render",He]]);const $e={fr:{"No children yet.":"Pas encore de blocs !","Add a block":"Ajouter un bloc","Close block list":"Fermer la liste","Teleport here.":"T\xE9l\xE9porter ici","Paste here.":"Coller ici","Edit this block":"\xC9diter ce bloc","Close this block":"Fermer ce bloc"},en:{}},b=(n,t)=>{const o=$e[t];if(!o)return n;const d=o[n];return d||n},Me={props:{show_adders:{},lang:{}},methods:{t_(n){return b(n,this.lang)}}},Se={class:"button is-small is-xsmall"},De={key:0,class:"icon is-small"},Te=[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1)],Ue={key:1,class:"icon is-small"},Ze=[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M19,6H22V8H19V11H17V8H14V6H17V3H19V6M17,17V14H19V19H3V6H11V8H5V17H17Z"})],-1)],Re={style:{"margin-left":"0.25em"}};function ze(n,t,o,d,s,l){return e.openBlock(),e.createElementBlock("button",Se,[o.show_adders?(e.openBlock(),e.createElementBlock("span",De,Te)):(e.openBlock(),e.createElementBlock("span",Ue,Ze)),e.createElementVNode("span",Re,e.toDisplayString(o.show_adders?l.t_("Close block list"):l.t_("Add a block")),1)])}var We=_(Me,[["render",ze]]);const Fe={props:{lang:{}},methods:{t_(n){return b(n,this.lang)}}},je={class:"button is-primary is-small is-xsmall"},Pe=e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M11,2V4.07C7.38,4.53 4.53,7.38 4.07,11H2V13H4.07C4.53,16.62 7.38,19.47 11,19.93V22H13V19.93C16.62,19.47 19.47,16.62 19.93,13H22V11H19.93C19.47,7.38 16.62,4.53 13,4.07V2M11,6.08V8H13V6.09C15.5,6.5 17.5,8.5 17.92,11H16V13H17.91C17.5,15.5 15.5,17.5 13,17.92V16H11V17.91C8.5,17.5 6.5,15.5 6.08,13H8V11H6.09C6.5,8.5 8.5,6.5 11,6.08M12,11A1,1 0 0,0 11,12A1,1 0 0,0 12,13A1,1 0 0,0 13,12A1,1 0 0,0 12,11Z"})])],-1),Ie={style:{"margin-left":"0.25em"}};function Oe(n,t,o,d,s,l){return e.openBlock(),e.createElementBlock("button",je,[Pe,e.createElementVNode("span",Ie,e.toDisplayString(l.t_("Teleport here.")),1)])}var qe=_(Fe,[["render",Oe]]);const Ge={props:{lang:{}},methods:{t_(n){return b(n,this.lang)}}},Xe={class:"button is-primary is-small is-xsmall"},Je=e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z"})])],-1),Ke={style:{"margin-left":"0.25em"}};function Qe(n,t,o,d,s,l){return e.openBlock(),e.createElementBlock("button",Xe,[Je,e.createElementVNode("span",Ke,e.toDisplayString(l.t_("Paste here.")),1)])}var Ye=_(Ge,[["render",Qe]]);const ve={props:{editing:{}}},et={key:0,class:"icon is-small"},tt={key:1,class:"icon is-small"};function ot(n,t,o,d,s,l){return e.openBlock(),e.createElementBlock("button",{class:"button is-rounded is-small is-xsmall",onClick:t[0]||(t[0]=p=>n.$emit("update:editcss",!o.editing))},[o.editing?(e.openBlock(),e.createElementBlock("span",tt," X ")):(e.openBlock(),e.createElementBlock("span",et," C "))])}var nt=_(ve,[["render",ot]]);const st={name:"BucheCssField",props:{classes:{type:String,default:""}},computed:{v:{get(){return this.classes},set(n){this.$emit("update:classes",n)}}}};function lt(n,t,o,d,s,l){return e.withDirectives((e.openBlock(),e.createElementBlock("input",{class:"input is-small",style:{display:"inline-block",width:"20ch",position:"relative",top:"-3px","border-radius":"16px",transform:"scale(0.9)"},"onUpdate:modelValue":t[0]||(t[0]=p=>l.v=p)},null,512)),[[e.vModelText,l.v]])}var dt=_(st,[["render",lt]]),to="";const it={components:{BucheBranch:j,BucheFoldButton:J,BucheReorderNextButton:Ne,BucheReorderPrevButton:ke,BucheCopyButton:ee,BucheTeleportButton:le,BucheDestroyButton:ae,BucheOpenActionsButton:Ae,BucheCloseActionsButton:pe,BucheShowAddersButton:We,BucheReceiveTeleportButton:qe,BucheReceiveCopyButton:Ye,BucheCssButton:nt,BucheCssField:dt},name:"BucheNode",data(){return{show_actions:!1,show_adders:!1,folded:!1,too_small:!1,open_for_edition:!1,editing_css:!1}},computed:{tNode(){return this.node}},props:{lang:{type:String,default:"en"},active_node:{},node:{type:Object,required:!0},show_labels:{type:Boolean,default:!1},depth:{type:Number,default:0},blocks:{type:Object,default:()=>({})},path:{type:Array,default:()=>[]},index:{type:Number},total:{type:Number},copy_candidate:{},teleport_candidate:{},can_destroy:{type:Boolean,default:!0},root:{type:Boolean,default:!1}},methods:{updateClasses(n){this.$emit("update:node",f(u({},this.node),{cssClasses:n}))},t_(n){return b(n,this.lang)},find_block(n){return this.blocks[n]},update_nodes(n){this.$emit("update:node",f(u({},this.node),{children:n}))},add_child(n){this.$emit("update:node",f(u({},this.node),{children:[...this.node.children,n.constructor()]})),this.show_adders=!1},check_sizing(){const n=this.$el.getBoundingClientRect().width;this.too_small=n<460}},mounted(){setInterval(()=>{this.open_for_edition||this.check_sizing()},300),window.addEventListener("resize",this.check_sizing)},beforeDestroy(){window.removeEventListener("resize",this.check_sizing)}},ct={class:"BucheNode_header"},rt={style:{display:"flex"}},at=e.createTextVNode(" \xA0 "),_t={key:0,class:"BucheNode_actions buttons"},ht={key:0,class:"BucheNode_editor"},mt={key:1,class:"BucheNode_children"},ut={key:0,class:"BucheNode_children_empty"},pt={key:1,class:"BucheNode_buttons_add_node",style:{"margin-top":"1em"}},ft={class:"buttons"},bt={class:"buttons",style:{"margin-top":"1em"}},yt=["onClick"],Bt={key:2,class:"BucheNode_tree_actions_buttons buttons"};function kt(n,t,o,d,s,l){var H,A;const p=e.resolveComponent("buche-fold-button"),r=e.resolveComponent("buche-css-field"),g=e.resolveComponent("buche-css-button"),h=e.resolveComponent("buche-reorder-prev-button"),Lt=e.resolveComponent("buche-reorder-next-button"),xt=e.resolveComponent("buche-copy-button"),Et=e.resolveComponent("buche-teleport-button"),Ht=e.resolveComponent("buche-destroy-button"),At=e.resolveComponent("buche-close-actions-button"),$t=e.resolveComponent("buche-open-actions-button"),Mt=e.resolveComponent("buche-branch"),St=e.resolveComponent("buche-show-adders-button"),Dt=e.resolveComponent("buche-receive-teleport-button"),Tt=e.resolveComponent("buche-receive-copy-button");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["BucheNode box box-small",{"BucheNode--open_for_edition":s.open_for_edition,[`BucheNode_node-${o.node.type}`]:1,"BucheNode--will_be_teleported":o.teleport_candidate===o.node.uuid,"BucheNode--will_be_copied":o.copy_candidate===o.node.uuid}]),onMousemove:t[20]||(t[20]=e.withModifiers(()=>o.active_node!==o.node.uuid?n.$emit("active_node",o.node.uuid):1,["stop"])),style:e.normalizeStyle({background:`rgba(0,0,0, ${.02*(o.depth%4)})`,border:o.active_node===o.node.uuid?"1px solid #0827a2":"1px solid #aaa",boxShadow:o.active_node===o.node.uuid?"0px 0px 5px rgba(24, 8, 85, 0.5)":""})},[e.createElementVNode("div",ct,[e.createElementVNode("div",rt,[e.createVNode(p,{folded:s.folded,"onUpdate:folded":t[0]||(t[0]=i=>s.folded=i)},null,8,["folded"]),at,e.withDirectives(e.createElementVNode("h3",{class:"BucheNode_title subtitle"},e.toDisplayString(l.find_block(o.node.type).label),513),[[e.vShow,o.show_labels]])]),e.withDirectives(e.createElementVNode("div",null,[e.createElementVNode("button",{class:"button is-rounded is-small is-xsmall",onClick:t[1]||(t[1]=i=>s.open_for_edition=!s.open_for_edition)},e.toDisplayString(l.t_("Edit this block")),1)],512),[[e.vShow,s.too_small&&!s.open_for_edition]]),e.withDirectives(e.createElementVNode("div",null,[e.createElementVNode("button",{class:"button is-rounded is-small is-xsmall",onClick:t[2]||(t[2]=i=>s.open_for_edition=!s.open_for_edition)},e.toDisplayString(l.t_("Close this block")),1)],512),[[e.vShow,s.open_for_edition]]),o.node.root?e.createCommentVNode("",!0):e.withDirectives((e.openBlock(),e.createElementBlock("div",_t,[s.editing_css?(e.openBlock(),e.createBlock(r,{key:0,classes:o.node.cssClasses||"","onUpdate:classes":l.updateClasses},null,8,["classes","onUpdate:classes"])):e.createCommentVNode("",!0),e.withDirectives(e.createVNode(g,{editing:s.editing_css,"onUpdate:editcss":t[3]||(t[3]=i=>s.editing_css=i)},null,8,["editing"]),[[e.vShow,s.show_actions]]),e.withDirectives(e.createVNode(h,{disabled:o.index&&o.index===0,onClick:t[4]||(t[4]=i=>n.$emit("before",o.node.uuid))},null,8,["disabled"]),[[e.vShow,s.show_actions]]),e.withDirectives(e.createVNode(Lt,{disabled:o.index&&o.index===(o.total||0)-1,onClick:t[5]||(t[5]=i=>n.$emit("after",o.node.uuid))},null,8,["disabled"]),[[e.vShow,s.show_actions]]),e.withDirectives(e.createVNode(xt,{class:e.normalizeClass(o.copy_candidate===o.node.uuid?"is-primary":""),onClick:t[6]||(t[6]=i=>n.$emit("bucheCopy",o.node.uuid))},null,8,["class"]),[[e.vShow,s.show_actions]]),e.withDirectives(e.createVNode(Et,{class:e.normalizeClass(o.teleport_candidate===o.node.uuid?"is-primary":""),onClick:t[7]||(t[7]=i=>n.$emit("teleport",o.node.uuid))},null,8,["class"]),[[e.vShow,s.show_actions]]),e.withDirectives(e.createVNode(Ht,{disabled:!o.can_destroy,onClick:t[8]||(t[8]=i=>n.$emit("destroy"))},null,8,["disabled"]),[[e.vShow,s.show_actions]]),e.withDirectives(e.createVNode(At,{onClick:t[9]||(t[9]=i=>s.show_actions=!1)},null,512),[[e.vShow,s.show_actions]]),e.withDirectives(e.createVNode($t,{onClick:t[10]||(t[10]=i=>s.show_actions=!0)},null,512),[[e.vShow,!s.show_actions]])],512)),[[e.vShow,!s.too_small||s.open_for_edition]])]),!s.too_small&&o.node.type!=="generic"?e.withDirectives((e.openBlock(),e.createElementBlock("div",ht,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.find_block(o.node.type).editor),{value:o.node.data,"onUpdate:value":t[11]||(t[11]=i=>o.node.data=i)},null,8,["value"]))],512)),[[e.vShow,!s.folded]]):e.createCommentVNode("",!0),(!s.folded&&!s.too_small||s.open_for_edition)&&l.find_block(o.node.type).has_children?e.withDirectives((e.openBlock(),e.createElementBlock("div",mt,[o.node.children.length===0?(e.openBlock(),e.createElementBlock("div",ut,e.toDisplayString(l.t_("No children yet.")),1)):e.createCommentVNode("",!0),e.createVNode(Mt,{nodes:l.tNode.children,path:[...o.path,l.tNode.type],blocks:o.blocks,lang:o.lang,can_destroy:!l.find_block(l.tNode.type).children_min||((H=l.find_block(l.tNode.type).children_min)!=null?H:0)<o.node.children.length,active_node:o.active_node,onActive_node:t[12]||(t[12]=i=>n.$emit("active_node",i)),show_labels:o.show_labels,depth:o.depth+1,onBucheCopy:t[13]||(t[13]=i=>n.$emit("bucheCopy",i)),onWant_teleport:t[14]||(t[14]=i=>n.$emit("want_teleport",i)),onTeleport:t[15]||(t[15]=i=>n.$emit("teleport",i)),onWant_copy:t[16]||(t[16]=i=>n.$emit("want_copy",i)),copy_candidate:o.copy_candidate,teleport_candidate:o.teleport_candidate,"onUpdate:nodes":l.update_nodes},null,8,["nodes","path","blocks","lang","can_destroy","active_node","show_labels","depth","copy_candidate","teleport_candidate","onUpdate:nodes"]),!l.find_block(l.tNode.type).children_max||((A=l.find_block(l.tNode.type).children_max)!=null?A:999)>l.tNode.children.length?e.withDirectives((e.openBlock(),e.createElementBlock("div",pt,[e.createElementVNode("div",ft,[e.createVNode(St,{lang:o.lang,show_adders:s.show_adders,onClick:t[17]||(t[17]=i=>s.show_adders=!s.show_adders)},null,8,["lang","show_adders"]),o.teleport_candidate&&o.teleport_candidate!==o.node.uuid?(e.openBlock(),e.createBlock(Dt,{key:0,lang:o.lang,onClick:t[18]||(t[18]=i=>n.$emit("want_teleport",l.tNode.uuid))},null,8,["lang"])):e.createCommentVNode("",!0),o.copy_candidate&&o.copy_candidate!==o.node.uuid?(e.openBlock(),e.createBlock(Tt,{key:1,lang:o.lang,onClick:t[19]||(t[19]=i=>n.$emit("want_copy",l.tNode.uuid))},null,8,["lang"])):e.createCommentVNode("",!0)]),e.withDirectives(e.createElementVNode("div",bt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.blocks,(i,Ut)=>(e.openBlock(),e.createElementBlock("button",{class:e.normalizeClass(["button is-small is-xsmall",["BucheNode_button_add_block",`BucheNode_button_add_block-${i.type}`]]),key:Ut,onClick:oo=>l.add_child(i)},e.toDisplayString(i.label),11,yt))),128))],512),[[e.vShow,s.show_adders]])],512)),[[e.vShow,!s.too_small||s.open_for_edition]]):e.createCommentVNode("",!0),o.teleport_candidate&&o.teleport_candidate!==o.node.uuid||o.copy_candidate&&o.copy_candidate!==o.node.uuid?(e.openBlock(),e.createElementBlock("div",Bt)):e.createCommentVNode("",!0)],512)),[[e.vShow,!s.folded&&!s.too_small||s.open_for_edition]]):e.createCommentVNode("",!0)],38)}var L=_(it,[["render",kt]]);const Ct={name:"Buche",components:{BucheNode:L},props:{node:{},lang:{type:String,default:"en"},blocks:{},show_labels:{type:Boolean,default:!0}},computed:{tNode(){return this.node},tBlocks(){return this.blocks}},data(){return{root_teleport_candidate:null,root_copy_candidate:null,active_node:null}},mounted(){!this.node||this.$emit("update:node",N(this.node))},methods:{trigger_teleport(n){const t=this.root_teleport_candidate,o=B(this.node,t);o!==null&&(this.$emit("update:node",R(this.node,o,n)),this.root_teleport_candidate=null)},trigger_copy(n){const t=this.root_copy_candidate,o=B(this.node,t);if(o===null)return;const d=k(o);this.$emit("update:node",C(this.node,d,n)),this.root_copy_candidate=null}}},gt={class:"Buche",style:{background:"white"}};function Vt(n,t,o,d,s,l){const p=e.resolveComponent("buche-node");return e.openBlock(),e.createElementBlock("div",gt,[o.node?(e.openBlock(),e.createBlock(p,{key:0,depth:0,index:0,active_node:s.active_node,onActive_node:t[0]||(t[0]=r=>s.active_node=r),total:1,lang:o.lang,root:!0,onWant_teleport:l.trigger_teleport,onWant_copy:l.trigger_copy,onTeleport:t[1]||(t[1]=r=>s.root_teleport_candidate=r===s.root_teleport_candidate?null:r),onBucheCopy:t[2]||(t[2]=r=>s.root_copy_candidate=r===s.root_copy_candidate?null:r),blocks:l.tBlocks,path:[],show_labels:o.show_labels,copy_candidate:s.root_copy_candidate,teleport_candidate:s.root_teleport_candidate,node:l.tNode,"onUpdate:node":t[3]||(t[3]=r=>n.$emit("update:node",r))},null,8,["active_node","lang","onWant_teleport","onWant_copy","blocks","show_labels","copy_candidate","teleport_candidate","node"])):e.createCommentVNode("",!0)])}var x=_(Ct,[["render",Vt]]);const E={type:"generic",label:"Groupe",constructor:()=>({data:{},root:!1,type:"generic",children:[],uuid:V()}),children_min:0,has_children:!0},wt=()=>f(u({},E.constructor()),{root:!0}),Nt=x;c.Buche=Nt,c.default=x,c.generic_block=E,c.root_node=wt,Object.defineProperty(c,"__esModule",{value:!0}),c[Symbol.toStringTag]="Module"});
