var Lt=Object.defineProperty,wt=Object.defineProperties;var Nt=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var xt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable;var $=(i,e,_)=>e in i?Lt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[e]=_,u=(i,e)=>{for(var _ in e||(e={}))xt.call(e,_)&&$(i,_,e[_]);if(E)for(var _ of E(e))Et.call(e,_)&&$(i,_,e[_]);return i},p=(i,e)=>wt(i,Nt(e));(function(i,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(i=typeof globalThis!="undefined"?globalThis:i||self,e(i.Buche={},i.Vue))})(this,function(i,e){"use strict";var _,H=new Uint8Array(16);function A(){if(!_&&(_=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(H)}var M=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function S(n){return typeof n=="string"&&M.test(n)}for(var r=[],f=0;f<256;++f)r.push((f+256).toString(16).substr(1));function D(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(r[n[o+0]]+r[n[o+1]]+r[n[o+2]]+r[n[o+3]]+"-"+r[n[o+4]]+r[n[o+5]]+"-"+r[n[o+6]]+r[n[o+7]]+"-"+r[n[o+8]]+r[n[o+9]]+"-"+r[n[o+10]]+r[n[o+11]]+r[n[o+12]]+r[n[o+13]]+r[n[o+14]]+r[n[o+15]]).toLowerCase();if(!S(t))throw TypeError("Stringified UUID is invalid");return t}function g(n,o,t){n=n||{};var l=n.random||(n.rng||A)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,o){t=t||0;for(var d=0;d<16;++d)o[t+d]=l[d];return o}return D(l)}const B=(n,o)=>n.uuid===o?n:(n.children||[]).reduce((t,l)=>t||B(l,o),null),k=n=>p(u({},n),{uuid:g(),children:(n.children||[]).map(o=>k(o))}),C=(n,o,t)=>n.uuid===t?p(u({},n),{children:[...n.children||[],o]}):p(u({},n),{children:(n.children||[]).map(l=>C(l,o,t))}),L=(n,o)=>p(u({},n),{children:n.children.filter(t=>t.uuid!==o).map(t=>L(t,o))}),T=(n,o,t)=>{const l=C(n,k(o),t);return L(l,o.uuid)};var h=(n,o)=>{for(const[t,l]of o)n[t]=l;return n};const Z={name:"BucheBranch",props:{lang:{type:String,default:"en"},nodes:{type:Array,default:()=>[]},show_labels:{type:Boolean,default:!1},copy_candidate:{},teleport_candidate:{},path:{},depth:{},blocks:{},can_destroy:{}},beforeCreate:function(){this.$options.components={BucheNode:w}},methods:{handle_before(n){const o=this.nodes.findIndex(d=>d.uuid===n);if(o===0||!o)return;const t=[...this.nodes],l=t.splice(o,1)[0];t.splice(o-1,0,l),this.$emit("update:nodes",t)},handle_after(n){const o=this.nodes.findIndex(d=>d.uuid===n);if(o===this.nodes.length-1||!o&&o!==0)return;const t=[...this.nodes],l=t.splice(o,1)[0];t.splice(o+1,0,l),this.$emit("update:nodes",t)},handle_destroy(n){this.$emit("update:nodes",[...this.nodes].filter(o=>o.uuid!==n))},updateBranch(n,o){this.$emit("update:nodes",this.nodes.map(t=>t.uuid===n?o:t))}}},R={class:"BucheBranch"};function U(n,o,t,l,d,s){const y=e.resolveComponent("buche-node");return e.openBlock(),e.createElementBlock("div",R,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.nodes,(a,V)=>(e.openBlock(),e.createBlock(y,{node:a,depth:t.depth,lang:t.lang,index:V,total:t.nodes.length,copy_candidate:t.copy_candidate,teleport_candidate:t.teleport_candidate,path:[...t.path,a.type],blocks:t.blocks,show_labels:t.show_labels,can_destroy:t.can_destroy,onBefore:m=>s.handle_before(a.uuid),onAfter:m=>s.handle_after(a.uuid),onWant_teleport:o[0]||(o[0]=m=>n.$emit("want_teleport",m)),onDestroy:m=>s.handle_destroy(a.uuid),onWant_copy:o[1]||(o[1]=m=>n.$emit("want_copy",m)),onTeleport:o[2]||(o[2]=m=>n.$emit("teleport",m)),onCopy:o[3]||(o[3]=m=>n.$emit("copy",m)),"onUpdate:node":m=>s.updateBranch(a.uuid,m),key:a.uuid},null,8,["node","depth","lang","index","total","copy_candidate","teleport_candidate","path","blocks","show_labels","can_destroy","onBefore","onAfter","onDestroy","onUpdate:node"]))),128))])}var W=h(Z,[["render",U]]);const j={props:{folded:{}}},z={key:0,class:"icon is-small"},P=[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"})],-1)],F={key:1,class:"icon is-small"},O=[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"})],-1)];function I(n,o,t,l,d,s){return e.openBlock(),e.createElementBlock("button",{class:"button is-rounded is-small is-xsmall",onClick:o[0]||(o[0]=y=>n.$emit("update:folded",!t.folded))},[t.folded?(e.openBlock(),e.createElementBlock("span",z,P)):(e.openBlock(),e.createElementBlock("span",F,O))])}var q=h(j,[["render",I]]);const G={name:"BucheCopyButton"},X={class:"BucheNode_action_reorder_copy button is-small is-xsmall is-rounded"},J=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"})])],-1)];function K(n,o,t,l,d,s){return e.openBlock(),e.createElementBlock("button",X,J)}var Q=h(G,[["render",K]]);const Y={name:"BucheTeleportButton"},v={class:"BucheNode_action_reorder_teleport button is-small is-xsmall is-rounded"},ee=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M13.13 22.19L11.5 18.36C13.07 17.78 14.54 17 15.9 16.09L13.13 22.19M5.64 12.5L1.81 10.87L7.91 8.1C7 9.46 6.22 10.93 5.64 12.5M19.22 4C19.5 4 19.75 4 19.96 4.05C20.13 5.44 19.94 8.3 16.66 11.58C14.96 13.29 12.93 14.6 10.65 15.47L8.5 13.37C9.42 11.06 10.73 9.03 12.42 7.34C15.18 4.58 17.64 4 19.22 4M19.22 2C17.24 2 14.24 2.69 11 5.93C8.81 8.12 7.5 10.53 6.65 12.64C6.37 13.39 6.56 14.21 7.11 14.77L9.24 16.89C9.62 17.27 10.13 17.5 10.66 17.5C10.89 17.5 11.13 17.44 11.36 17.35C13.5 16.53 15.88 15.19 18.07 13C23.73 7.34 21.61 2.39 21.61 2.39S20.7 2 19.22 2M14.54 9.46C13.76 8.68 13.76 7.41 14.54 6.63S16.59 5.85 17.37 6.63C18.14 7.41 18.15 8.68 17.37 9.46C16.59 10.24 15.32 10.24 14.54 9.46M8.88 16.53L7.47 15.12L8.88 16.53M6.24 22L9.88 18.36C9.54 18.27 9.21 18.12 8.91 17.91L4.83 22H6.24M2 22H3.41L8.18 17.24L6.76 15.83L2 20.59V22M2 19.17L6.09 15.09C5.88 14.79 5.73 14.47 5.64 14.12L2 17.76V19.17Z"})])],-1)];function te(n,o,t,l,d,s){return e.openBlock(),e.createElementBlock("button",v,ee)}var oe=h(Y,[["render",te]]);const ne={name:"BucheDestroyButton"},de={class:"BucheNode_action_reorder_destroy button is-small is-xsmall is-rounded"},le=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z"})])],-1)];function se(n,o,t,l,d,s){return e.openBlock(),e.createElementBlock("button",de,le)}var ce=h(ne,[["render",se]]);const ie={name:"BucheCloseActionsButton"},re={class:"BucheNode_action_hide_actions button is-small is-xsmall is-rounded"},ae=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})])],-1)];function _e(n,o,t,l,d,s){return e.openBlock(),e.createElementBlock("button",re,ae)}var he=h(ie,[["render",_e]]);const me={},ue={class:"BucheNode_action_reorder_prev button is-small is-xsmall is-rounded"},pe=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z"})])],-1)];function ye(n,o,t,l,d,s){return e.openBlock(),e.createElementBlock("button",ue,pe)}var be=h(me,[["render",ye]]);const fe={},Be={class:"BucheNode_action_reorder_next button is-small is-xsmall is-rounded"},ke=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z"})])],-1)];function Ce(n,o,t,l,d,s){return e.openBlock(),e.createElementBlock("button",Be,ke)}var Ve=h(fe,[["render",Ce]]);const ge={},Le={class:"BucheNode_action_hide_actions button is-small is-xsmall is-rounded"},we=[e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z"})])],-1)];function Ne(n,o,t,l,d,s){return e.openBlock(),e.createElementBlock("button",Le,we)}var xe=h(ge,[["render",Ne]]);const Ee={fr:{"No children yet.":"Pas encore de blocs !","Add a block":"Ajouter un bloc","Close block list":"Fermer la liste","Teleport here.":"T\xE9l\xE9porter ici","Paste here.":"Coller ici"},en:{}},b=(n,o)=>{const t=Ee[o];if(!t)return n;const l=t[n];return l||n},$e={props:{show_adders:{},lang:{}},methods:{t_(n){return b(n,this.lang)}}},He={class:"button is-small is-xsmall"},Ae={key:0,class:"icon is-small"},Me=[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1)],Se={key:1,class:"icon is-small"},De=[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M19,6H22V8H19V11H17V8H14V6H17V3H19V6M17,17V14H19V19H3V6H11V8H5V17H17Z"})],-1)],Te={style:{"margin-left":"0.25em"}};function Ze(n,o,t,l,d,s){return e.openBlock(),e.createElementBlock("button",He,[t.show_adders?(e.openBlock(),e.createElementBlock("span",Ae,Me)):(e.openBlock(),e.createElementBlock("span",Se,De)),e.createElementVNode("span",Te,e.toDisplayString(t.show_adders?s.t_("Close block list"):s.t_("Add a block")),1)])}var Re=h($e,[["render",Ze]]);const Ue={props:{lang:{}},methods:{t_(n){return b(n,this.lang)}}},We={class:"button is-primary is-small is-xsmall"},je=e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M11,2V4.07C7.38,4.53 4.53,7.38 4.07,11H2V13H4.07C4.53,16.62 7.38,19.47 11,19.93V22H13V19.93C16.62,19.47 19.47,16.62 19.93,13H22V11H19.93C19.47,7.38 16.62,4.53 13,4.07V2M11,6.08V8H13V6.09C15.5,6.5 17.5,8.5 17.92,11H16V13H17.91C17.5,15.5 15.5,17.5 13,17.92V16H11V17.91C8.5,17.5 6.5,15.5 6.08,13H8V11H6.09C6.5,8.5 8.5,6.5 11,6.08M12,11A1,1 0 0,0 11,12A1,1 0 0,0 12,13A1,1 0 0,0 13,12A1,1 0 0,0 12,11Z"})])],-1),ze={style:{"margin-left":"0.25em"}};function Pe(n,o,t,l,d,s){return e.openBlock(),e.createElementBlock("button",We,[je,e.createElementVNode("span",ze,e.toDisplayString(s.t_("Teleport here.")),1)])}var Fe=h(Ue,[["render",Pe]]);const Oe={props:{lang:{}},methods:{t_(n){return b(n,this.lang)}}},Ie={class:"button is-primary is-small is-xsmall"},qe=e.createElementVNode("span",{class:"icon is-small"},[e.createElementVNode("svg",{style:{width:"14px",height:"14px"},viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z"})])],-1),Ge={style:{"margin-left":"0.25em"}};function Xe(n,o,t,l,d,s){return e.openBlock(),e.createElementBlock("button",Ie,[qe,e.createElementVNode("span",Ge,e.toDisplayString(s.t_("Paste here.")),1)])}var Je=h(Oe,[["render",Xe]]),Pt="";const Ke={components:{BucheBranch:W,BucheFoldButton:q,BucheReorderNextButton:Ve,BucheReorderPrevButton:be,BucheCopyButton:Q,BucheTeleportButton:oe,BucheDestroyButton:ce,BucheOpenActionsButton:xe,BucheCloseActionsButton:he,BucheShowAddersButton:Re,BucheReceiveTeleportButton:Fe,BucheReceiveCopyButton:Je},name:"BucheNode",data(){return{show_actions:!1,show_adders:!1,folded:!1}},props:{lang:{type:String,default:"en"},node:{type:Object,required:!0},show_labels:{type:Boolean,default:!1},depth:{type:Number,default:0},blocks:{type:Object,default:()=>({})},path:{type:Array,default:()=>[]},index:{type:Number},total:{type:Number},copy_candidate:{},teleport_candidate:{},can_destroy:{type:Boolean,default:!0},root:{type:Boolean,default:!1}},methods:{t_(n){return b(n,this.lang)},find_block(n){return this.blocks[n]},update_nodes(n){this.$emit("update:node",p(u({},this.node),{children:n}))},add_child(n){this.$emit("update:node",p(u({},this.node),{children:[...this.node.children,n.constructor()]})),this.show_adders=!1}}},Qe={class:"BucheNode_header"},Ye={style:{display:"flex"}},ve=e.createTextVNode(" \xA0 "),et={key:0,class:"BucheNode_actions buttons"},tt={key:0,class:"BucheNode_editor"},ot={key:1,class:"BucheNode_children"},nt={key:0,class:"BucheNode_children_empty"},dt={key:1,class:"BucheNode_buttons_add_node",style:{"margin-top":"1em"}},lt={class:"buttons"},st={class:"buttons",style:{"margin-top":"1em"}},ct=["onClick"],it={key:2,class:"BucheNode_tree_actions_buttons buttons"};function rt(n,o,t,l,d,s){const y=e.resolveComponent("buche-fold-button"),a=e.resolveComponent("buche-reorder-prev-button"),V=e.resolveComponent("buche-reorder-next-button"),m=e.resolveComponent("buche-copy-button"),pt=e.resolveComponent("buche-teleport-button"),yt=e.resolveComponent("buche-destroy-button"),bt=e.resolveComponent("buche-close-actions-button"),ft=e.resolveComponent("buche-open-actions-button"),Bt=e.resolveComponent("buche-branch"),kt=e.resolveComponent("buche-show-adders-button"),Ct=e.resolveComponent("buche-receive-teleport-button"),Vt=e.resolveComponent("buche-receive-copy-button");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["BucheNode box box-small",{[`BucheNode_node-${t.node.type}`]:1,"BucheNode--will_be_teleported":t.teleport_candidate===t.node.uuid,"BucheNode--will_be_copied":t.copy_candidate===t.node.uuid}]),style:e.normalizeStyle({background:`rgba(0,0,0, ${.03*(t.depth%4)})`})},[e.createElementVNode("div",Qe,[e.createElementVNode("div",Ye,[e.createVNode(y,{folded:d.folded,"onUpdate:folded":o[0]||(o[0]=c=>d.folded=c)},null,8,["folded"]),ve,e.withDirectives(e.createElementVNode("h3",{class:"BucheNode_title subtitle"},e.toDisplayString(s.find_block(t.node.type).label),513),[[e.vShow,t.show_labels]])]),t.node.root?e.createCommentVNode("",!0):e.withDirectives((e.openBlock(),e.createElementBlock("div",et,[e.withDirectives(e.createVNode(a,{disabled:t.index&&t.index===0,onClick:o[1]||(o[1]=c=>n.$emit("before",t.node.uuid))},null,8,["disabled"]),[[e.vShow,d.show_actions]]),e.withDirectives(e.createVNode(V,{disabled:t.index&&t.index===t.total-1,onClick:o[2]||(o[2]=c=>n.$emit("after",t.node.uuid))},null,8,["disabled"]),[[e.vShow,d.show_actions]]),e.withDirectives(e.createVNode(m,{class:e.normalizeClass(t.copy_candidate===t.node.uuid?"is-primary":""),onClick:o[3]||(o[3]=c=>n.$emit("copy",t.node.uuid))},null,8,["class"]),[[e.vShow,d.show_actions]]),e.withDirectives(e.createVNode(pt,{class:e.normalizeClass(t.teleport_candidate===t.node.uuid?"is-primary":""),onClick:o[4]||(o[4]=c=>n.$emit("teleport",t.node.uuid))},null,8,["class"]),[[e.vShow,d.show_actions]]),e.withDirectives(e.createVNode(yt,{disabled:!t.can_destroy,onClick:o[5]||(o[5]=c=>n.$emit("destroy"))},null,8,["disabled"]),[[e.vShow,d.show_actions]]),e.withDirectives(e.createVNode(bt,{onClick:o[6]||(o[6]=c=>d.show_actions=0)},null,512),[[e.vShow,d.show_actions]]),e.withDirectives(e.createVNode(ft,{onClick:o[7]||(o[7]=c=>d.show_actions=1)},null,512),[[e.vShow,!d.show_actions]])],512)),[[e.vShow,!d.folded]])]),t.node.type!=="generic"?e.withDirectives((e.openBlock(),e.createElementBlock("div",tt,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(s.find_block(t.node.type).editor),{value:t.node.data,"onUpdate:value":o[8]||(o[8]=c=>t.node.data=c)},null,8,["value"]))],512)),[[e.vShow,!d.folded]]):e.createCommentVNode("",!0),s.find_block(t.node.type).has_children?e.withDirectives((e.openBlock(),e.createElementBlock("div",ot,[t.node.children.length===0?(e.openBlock(),e.createElementBlock("div",nt,e.toDisplayString(s.t_("No children yet.")),1)):e.createCommentVNode("",!0),e.createVNode(Bt,{nodes:t.node.children,path:[...t.path,t.node.type],blocks:t.blocks,lang:t.lang,can_destroy:!s.find_block(t.node.type).children_min||s.find_block(t.node.type).children_min<t.node.children.length,show_labels:t.show_labels,depth:t.depth+1,onCopy:o[9]||(o[9]=c=>n.$emit("copy",c)),onWant_teleport:o[10]||(o[10]=c=>n.$emit("want_teleport",c)),onTeleport:o[11]||(o[11]=c=>n.$emit("teleport",c)),onWant_copy:o[12]||(o[12]=c=>n.$emit("want_copy",c)),copy_candidate:t.copy_candidate,teleport_candidate:t.teleport_candidate,"onUpdate:nodes":s.update_nodes},null,8,["nodes","path","blocks","lang","can_destroy","show_labels","depth","copy_candidate","teleport_candidate","onUpdate:nodes"]),!s.find_block(t.node.type).children_max||s.find_block(t.node.type).children_max>t.node.children.length?(e.openBlock(),e.createElementBlock("div",dt,[e.createElementVNode("div",lt,[e.createVNode(kt,{lang:t.lang,show_adders:d.show_adders,onClick:o[13]||(o[13]=c=>d.show_adders=!d.show_adders)},null,8,["lang","show_adders"]),t.teleport_candidate&&t.teleport_candidate!==t.node.uuid?(e.openBlock(),e.createBlock(Ct,{key:0,lang:t.lang,onClick:o[14]||(o[14]=c=>n.$emit("want_teleport",this.node.uuid))},null,8,["lang"])):e.createCommentVNode("",!0),t.copy_candidate&&t.copy_candidate!==t.node.uuid?(e.openBlock(),e.createBlock(Vt,{key:1,lang:t.lang,onClick:o[15]||(o[15]=c=>n.$emit("want_copy",this.node.uuid))},null,8,["lang"])):e.createCommentVNode("",!0)]),e.withDirectives(e.createElementVNode("div",st,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.blocks,(c,gt)=>(e.openBlock(),e.createElementBlock("button",{class:e.normalizeClass(["button is-small is-xsmall",["BucheNode_button_add_block",`BucheNode_button_add_block-${c.type}`]]),key:gt,onClick:Ft=>s.add_child(c)},e.toDisplayString(c.label),11,ct))),128))],512),[[e.vShow,d.show_adders]])])):e.createCommentVNode("",!0),t.teleport_candidate&&t.teleport_candidate!==t.node.uuid||t.copy_candidate&&t.copy_candidate!==t.node.uuid?(e.openBlock(),e.createElementBlock("div",it)):e.createCommentVNode("",!0)],512)),[[e.vShow,!d.folded]]):e.createCommentVNode("",!0)],6)}var w=h(Ke,[["render",rt]]);const at={name:"Buche",components:{BucheNode:w},props:{node:{},lang:{type:String,default:"en"},blocks:{},show_labels:{type:Boolean,default:!0}},data(){return{root_teleport_candidate:null,root_copy_candidate:null}},methods:{trigger_teleport(n){const o=this.root_teleport_candidate,t=B(this.node,o);this.$emit("update:node",T(this.node,t,n)),this.root_teleport_candidate=null},trigger_copy(n){const o=this.root_copy_candidate,t=B(this.node,o),l=k(t);this.$emit("update:node",C(this.node,l,n)),this.root_copy_candidate=null}}},_t={class:"Buche box box-small"};function ht(n,o,t,l,d,s){const y=e.resolveComponent("buche-node");return e.openBlock(),e.createElementBlock("div",_t,[t.node?(e.openBlock(),e.createBlock(y,{key:0,depth:0,index:0,total:1,lang:t.lang,root:!0,onWant_teleport:s.trigger_teleport,onWant_copy:s.trigger_copy,onTeleport:o[0]||(o[0]=a=>d.root_teleport_candidate=a===d.root_teleport_candidate?null:a),onCopy:o[1]||(o[1]=a=>d.root_copy_candidate=a===d.root_copy_candidate?null:a),blocks:t.blocks,path:[],show_labels:t.show_labels,copy_candidate:d.root_copy_candidate,teleport_candidate:d.root_teleport_candidate,node:t.node,"onUpdate:node":o[2]||(o[2]=a=>n.$emit("update:node",a))},null,8,["lang","onWant_teleport","onWant_copy","blocks","show_labels","copy_candidate","teleport_candidate","node"])):e.createCommentVNode("",!0)])}var N=h(at,[["render",ht]]);const x={type:"generic",label:"Groupe",constructor:()=>({data:{},root:!1,type:"generic",children:[],uuid:g()}),children_min:0,has_children:!0},mt=()=>p(u({},x.constructor()),{root:!0}),ut=N;i.Buche=ut,i.default=N,i.generic_block=x,i.root_node=mt,Object.defineProperty(i,"__esModule",{value:!0}),i[Symbol.toStringTag]="Module"});
